2025-12-22 00:48:05,721 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,723 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,727 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,730 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,733 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,749 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,854 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,858 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,861 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,862 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,864 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,870 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,874 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,884 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,890 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,893 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,896 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,899 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,901 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,904 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,915 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,918 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,920 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,923 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,925 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:05,927 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,056 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,060 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,064 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,065 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,070 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,077 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,081 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,082 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,090 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,093 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,098 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,101 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,105 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,106 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,109 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,109 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,116 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,119 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,122 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,124 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,126 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,127 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,129 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,132 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,132 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,134 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,135 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,137 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,145 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,147 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,149 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,151 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,153 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,155 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,157 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,159 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,168 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,169 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,170 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,176 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,178 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,180 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,182 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,182 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,186 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,190 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,191 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,194 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,195 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,198 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,200 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,257 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,260 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,264 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,271 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,274 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,277 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,281 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,290 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,287 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,292 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,300 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,302 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,311 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,317 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,320 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,321 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,323 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,327 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,329 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,335 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,341 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,344 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,354 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,355 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,357 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,358 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,360 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,363 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,364 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,367 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,370 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,368 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,373 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:06,378 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 46, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 159, in state_connection_fully_established
    self.set_connection_fully_established()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 180, in set_connection_fully_established
    self.sendAddr()
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 205, in sendAddr
    and v["rating"] >= 0 and not _ends_with(k.host, '.onion')
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/tcp.py", line 48, in _ends_with
    return s.endswith(tail)
           ^^^^^^^^^^^^^^^^
TypeError: endswith first arg must be bytes or a tuple of bytes, not str
2025-12-22 00:48:16,144 - ERROR - Failed to save knownnodes: Object of type bytes is not JSON serializable
2025-12-22 00:48:16,144 - WARNING -  Known nodes save failed: Object of type bytes is not JSON serializable
2025-12-22 00:48:18,396 - WARNING -  GUI still running, forcing exit
2025-12-22 00:49:41,654 - WARNING - Using default logger configuration
2025-12-22 00:50:29,274 - WARNING - Using default logger configuration
2025-12-22 00:51:31,124 - WARNING - Using default logger configuration
2025-12-22 00:53:04,366 - WARNING - Using default logger configuration
2025-12-22 00:53:15,926 - WARNING - Using default logger configuration
2025-12-22 00:54:55,185 - WARNING - Using default logger configuration
2025-12-22 00:55:57,371 - WARNING - Using default logger configuration
2025-12-22 00:57:25,277 - WARNING - Using default logger configuration
2025-12-22 00:57:55,679 - WARNING - Using default logger configuration
2025-12-22 00:59:31,192 - WARNING - Using default logger configuration
2025-12-22 00:59:53,967 - WARNING - Using default logger configuration
2025-12-22 01:02:17,811 - WARNING - Using default logger configuration
2025-12-22 01:02:18,368 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:02:18,373 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:02:18,374 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:02:18,374 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:02:18,404 - WARNING - No indicator plugin found
2025-12-22 01:02:18,427 - WARNING - No notification.message plugin found
2025-12-22 01:03:13,113 - ERROR - Failed to save knownnodes: Object of type bytes is not JSON serializable
2025-12-22 01:03:13,113 - WARNING -  Known nodes save failed: Object of type bytes is not JSON serializable
2025-12-22 01:03:15,114 - WARNING -  GUI still running, forcing exit
2025-12-22 01:03:37,416 - WARNING - Using default logger configuration
2025-12-22 01:03:38,035 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:03:38,042 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:03:38,043 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:03:38,044 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:03:38,076 - WARNING - No indicator plugin found
2025-12-22 01:03:38,098 - WARNING - No notification.message plugin found
2025-12-22 01:04:23,867 - ERROR - Failed to save knownnodes: Object of type bytes is not JSON serializable
2025-12-22 01:04:23,867 - WARNING -  Known nodes save failed: Object of type bytes is not JSON serializable
2025-12-22 01:04:25,867 - WARNING -  GUI still running, forcing exit
2025-12-22 01:07:47,041 - WARNING - Using default logger configuration
2025-12-22 01:07:47,582 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:07:47,587 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:07:47,587 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:07:47,588 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:07:47,617 - WARNING - No indicator plugin found
2025-12-22 01:07:47,637 - WARNING - No notification.message plugin found
2025-12-22 01:08:05,338 - WARNING -  GUI still running, forcing exit
2025-12-22 01:09:38,689 - WARNING - Using default logger configuration
2025-12-22 01:09:39,288 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:09:39,295 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:09:39,295 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:09:39,296 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:09:39,329 - WARNING - No indicator plugin found
2025-12-22 01:09:39,352 - WARNING - No notification.message plugin found
2025-12-22 01:10:03,215 - ERROR - 118.250.129.34:2841 error: 2, bytearray(b'Too many connections from your IP. Closing connection.')
2025-12-22 01:10:35,471 - ERROR - 0.0.0.0:8444 error: 2, bytearray(b"I\'m connected to myself. Closing connection.")
2025-12-22 01:12:00,714 - WARNING -  GUI still running, forcing exit
2025-12-22 01:18:36,429 - WARNING - Using default logger configuration
2025-12-22 01:18:36,999 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:18:37,005 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:18:37,005 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:18:37,006 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:18:37,035 - WARNING - No indicator plugin found
2025-12-22 01:18:37,055 - WARNING - No notification.message plugin found
2025-12-22 01:18:46,745 - ERROR - ERROR: Simple test query failed!
2025-12-22 01:19:17,472 - ERROR - 85.114.135.102:8444 error: 2, bytearray(b'Too many connections from your IP. Closing connection.')
2025-12-22 01:19:52,931 - ERROR - Got signal 2 in MainProcess/PyBitmessage
2025-12-22 01:19:52,932 - ERROR - Got signal 2
2025-12-22 01:19:53,530 - ERROR - Got signal 2 in MainProcess/PyBitmessage
2025-12-22 01:19:53,530 - ERROR - Got signal 2
2025-12-22 01:20:33,327 - WARNING - Using default logger configuration
2025-12-22 01:20:33,926 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:20:33,932 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:20:33,932 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:20:33,933 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:20:33,966 - WARNING - No indicator plugin found
2025-12-22 01:20:33,988 - WARNING - No notification.message plugin found
2025-12-22 01:20:52,296 - WARNING -  GUI still running, forcing exit
2025-12-22 01:22:02,084 - WARNING - Using default logger configuration
2025-12-22 01:22:02,650 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:22:02,656 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:22:02,656 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:22:02,657 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:22:02,686 - WARNING - No indicator plugin found
2025-12-22 01:22:02,707 - WARNING - No notification.message plugin found
2025-12-22 01:22:06,789 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/bmproto.py", line 137, in state_bm_command
    self, "bm_command_" + decode(self.command, "utf-8", "replace").lower())()
                          ^^^^^^
NameError: name 'decode' is not defined
2025-12-22 01:22:08,576 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/bmproto.py", line 137, in state_bm_command
    self, "bm_command_" + decode(self.command, "utf-8", "replace").lower())()
                          ^^^^^^
NameError: name 'decode' is not defined
2025-12-22 01:22:10,730 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/bmproto.py", line 137, in state_bm_command
    self, "bm_command_" + decode(self.command, "utf-8", "replace").lower())()
                          ^^^^^^
NameError: name 'decode' is not defined
2025-12-22 01:22:11,785 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/bmproto.py", line 137, in state_bm_command
    self, "bm_command_" + decode(self.command, "utf-8", "replace").lower())()
                          ^^^^^^
NameError: name 'decode' is not defined
2025-12-22 01:22:20,791 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/bmproto.py", line 137, in state_bm_command
    self, "bm_command_" + decode(self.command, "utf-8", "replace").lower())()
                          ^^^^^^
NameError: name 'decode' is not defined
2025-12-22 01:22:29,425 - ERROR - Error processing
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/network/receivequeuethread.py", line 44, in run
    connection.process()
  File "/home/jon/DEBUG_pybitmessage/src/network/advanceddispatcher.py", line 92, in process
    if not cmd():
           ^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/network/bmproto.py", line 137, in state_bm_command
    self, "bm_command_" + decode(self.command, "utf-8", "replace").lower())()
                          ^^^^^^
NameError: name 'decode' is not defined
2025-12-22 01:22:33,232 - ERROR - Got signal 2 in MainProcess/PyBitmessage
2025-12-22 01:22:33,232 - ERROR - Got signal 2
2025-12-22 01:22:34,731 - ERROR - Got signal 2 in MainProcess/PyBitmessage
2025-12-22 01:22:34,731 - ERROR - Got signal 2
2025-12-22 01:22:41,532 - WARNING -  GUI still running, forcing exit
2025-12-22 01:23:08,353 - WARNING - Using default logger configuration
2025-12-22 01:23:08,921 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:23:08,927 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:23:08,927 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:23:08,928 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:23:08,957 - WARNING - No indicator plugin found
2025-12-22 01:23:08,978 - WARNING - No notification.message plugin found
2025-12-22 01:23:09,639 - ERROR - 170.75.173.70:63433 error: 2, bytearray(b'Too many connections from your IP. Closing connection.')
2025-12-22 01:23:18,754 - ERROR - ERROR: Simple test query failed!
2025-12-22 01:24:47,786 - WARNING -  GUI still running, forcing exit
2025-12-22 01:28:34,922 - WARNING - Using default logger configuration
2025-12-22 01:28:35,516 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:28:35,521 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:28:35,522 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:28:35,522 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:28:35,551 - WARNING - No indicator plugin found
2025-12-22 01:28:35,572 - WARNING - No notification.message plugin found
2025-12-22 01:28:53,713 - ERROR - 0.0.0.0:8444 error: 2, bytearray(b"I\'m connected to myself. Closing connection.")
2025-12-22 01:28:55,660 - ERROR - 170.75.173.70:63433 error: 2, bytearray(b'Too many connections from your IP. Closing connection.')
2025-12-22 01:29:16,617 - ERROR - 170.75.173.70:63433 error: 2, bytearray(b'Too many connections from your IP. Closing connection.')
2025-12-22 01:29:22,954 - WARNING - ECDSA verify failed (within processpubkey)
2025-12-22 01:29:38,352 - ERROR - 85.25.46.168:8444 error: 2, bytearray(b'Too many connections from your IP. Closing connection.')
2025-12-22 01:30:12,320 - WARNING -  GUI still running, forcing exit
2025-12-22 01:33:24,876 - WARNING - Using default logger configuration
2025-12-22 01:33:41,416 - ERROR - Got signal 2 in MainProcess/PyBitmessage
2025-12-22 01:33:41,417 - ERROR - Got signal 2
2025-12-22 01:33:41,881 - ERROR - Got signal 2 in MainProcess/PyBitmessage
2025-12-22 01:33:41,881 - ERROR - Got signal 2
2025-12-22 01:35:38,069 - WARNING - Using default logger configuration
2025-12-22 01:35:38,651 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:35:38,656 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:35:38,656 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:35:38,657 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:35:38,686 - WARNING - No indicator plugin found
2025-12-22 01:35:38,707 - WARNING - No notification.message plugin found
2025-12-22 01:36:19,594 - WARNING -  GUI still running, forcing exit
2025-12-22 01:36:30,539 - WARNING - Using default logger configuration
2025-12-22 01:36:31,125 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:36:31,130 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:36:31,130 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:36:31,131 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:36:31,162 - WARNING - No indicator plugin found
2025-12-22 01:36:31,182 - WARNING - No notification.message plugin found
2025-12-22 01:36:35,282 - ERROR - 194.182.189.194:8444 error: 2, bytearray(b'Too many connections from your IP. Closing connection.')
2025-12-22 01:36:41,873 - WARNING - Proof of Work exception
2025-12-22 01:40:07,605 - WARNING -  GUI still running, forcing exit
2025-12-22 01:47:36,498 - WARNING - Using default logger configuration
2025-12-22 01:47:37,085 - WARNING - DEBUG: Error processing namecoin.conf
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 363, in ensureNamecoinOptions
    with safe_open(nmcConfig, "r") as nmc:
         ^^^^^^^^^
NameError: name 'safe_open' is not defined
2025-12-22 01:47:37,092 - ERROR - DEBUG: HTTP connection error: a bytes-like object is required, not 'str'
2025-12-22 01:47:37,093 - ERROR - DEBUG: Namecoin connection test failure
Traceback (most recent call last):
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 166, in test
    vers = self.callRPC("getinfo", [])["version"]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jon/DEBUG_pybitmessage/src/namecoin.py", line 225, in callRPC
    val = json.loads(resp)
          ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
TypeError: the JSON object must be str, bytes or bytearray, not NoneType
2025-12-22 01:47:37,094 - WARNING - There was a problem testing for a Namecoin daemon. Hiding the Fetch Namecoin ID button
2025-12-22 01:47:37,128 - WARNING - No indicator plugin found
2025-12-22 01:47:37,149 - WARNING - No notification.message plugin found
2025-12-22 01:47:48,831 - WARNING - Proof of Work exception
2025-12-22 01:47:48,973 - ERROR - ERROR: Simple test query failed!
2025-12-22 01:48:01,896 - ERROR - 170.75.173.70:63433 error: 2, bytearray(b'Too many connections from your IP. Closing connection.')
